<div class="max-w-3xl mx-auto space-y-6">
    <div class="border border-[var(--border)] bg-[var(--surface)] shadow-sm">
        <div class="border-b border-[var(--border-muted)] bg-gradient-to-b from-[var(--surface2)] to-[var(--surface)] px-4 py-3">
            <div class="text-lg font-black">Settings</div>
        </div>
        <div class="p-4 space-y-4">
            <details class="border border-[var(--border-muted)] bg-[var(--surface2)] p-3">
                <summary class="cursor-pointer font-bold">Edit profile</summary>
                <div class="mt-3 space-y-10">
                    <%= form_with model: current_user, url: settings_path, method: :patch, multipart: true, class: "space-y-6" do |f| %>
                        <div class="flex flex-col md:flex-row items-start gap-6">
                            <div class="flex flex-col items-center">
                                <%= render "shared/avatar", user: current_user, size: 128 %>
                                <% if current_user.avatar.attached? %>
                                    <div class="mt-2">
                                        <%= button_to "Remove avatar", avatar_settings_path, method: :delete, data: { turbo_confirm: "Remove your avatar?" }, form_class: "inline", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-3 py-1 text-sm font-bold shadow-sm hover:bg-[var(--button-bg-hover)]" %>
                                    </div>
                                <% end %>
                            </div>
                            <div class="flex-1">
                                <%= f.label :avatar, "Upload avatar", class: "block text-sm font-semibold" %>
                                <%= f.file_field :avatar, accept: "image/*", class: "mt-1 block w-full text-sm" %>
                                <div class="text-xs text-[var(--muted)] mt-1">PNG/JPG/WEBP/GIF</div>
                            </div>
                        </div>

                        <div class="flex flex-col md:flex-row items-start gap-6">
                            <div class="flex-1">
                                <%= f.label :bio, "Bio", class: "block text-sm font-semibold" %>
                                <%= f.text_area :bio, rows: 3, class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                            </div>
                            <div class="flex-1">
                                <%= f.label :link, "External link", class: "block text-sm font-semibold" %>
                                <%= f.url_field :link, class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                            </div>
                        </div>  
                        <div class="flex justify-end">
                            <%= f.submit "Update profile", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-hover)]" %>
                        </div>
                    <% end %>
                </div>
            </details>

            <details class="border border-[var(--border-muted)] bg-[var(--surface2)] p-3">
                <summary class="cursor-pointer font-bold">Change your email address</summary>
                <div class="mt-3">
                    <%= form_with url: email_settings_path, method: :patch do %>
                        <div>
                            <%= label_tag :current_email, "Current email address", class: "block text-sm font-semibold" %>
                            <%= email_field_tag :current_email, nil, autocomplete: "email", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="mt-4">
                            <%= label_tag :new_email, "New email address", class: "block text-sm font-semibold" %>
                            <%= email_field_tag :new_email, nil, autocomplete: "email", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="mt-4">
                            <%= label_tag :current_password, "Current password", class: "block text-sm font-semibold" %>
                            <%= password_field_tag :current_password, nil, autocomplete: "current-password", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="flex justify-end">
                            <%= submit_tag "Update email address", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-hover)] mt-4" %>
                        </div>
                    <% end %>
                </div>
            </details>

            <details class="border border-[var(--border-muted)] bg-[var(--surface2)] p-3">
                <summary class="cursor-pointer font-bold">Change your password</summary>
                <div class="mt-3">
                    <%= form_with url: password_settings_path, method: :patch do %>
                        <div class="mt-4">
                            <%= label_tag :current_password, "Current password", class: "block text-sm font-semibold" %>
                            <%= password_field_tag :password, nil, autocomplete: "current-password", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="mt-4">
                            <%= label_tag :new_password, "New password", class: "block text-sm font-semibold" %>
                            <%= password_field_tag :new_password, nil, autocomplete: "new-password", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="mt-4">
                            <%= label_tag :new_password_confirmation, "Confirm new password", class: "block text-sm font-semibold" %>
                            <%= password_field_tag :new_password_confirmation, nil, autocomplete: "new-password", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="flex justify-end">
                            <%= submit_tag "Update password", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-hover)] mt-4" %>
                        </div>
                    <% end %>
                </div>
            </details>

            <details class="border border-[var(--border-muted)] bg-[var(--surface2)] p-3">
                <summary class="cursor-pointer font-bold">Change your username</summary>
                <div class="mt-3">
                    <%= form_with url: username_settings_path, method: :patch do %>
                        <div class="mt-4">
                            <%= label_tag :current_password, "Current password", class: "block text-sm font-semibold" %>
                            <%= password_field_tag :current_password, nil, autocomplete: "current-password", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="mt-4">
                            <%= label_tag :new_username, "New username", class: "block text-sm font-semibold" %>
                            <%= text_field_tag :new_username, nil, autocomplete: "username", class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
                        </div>
                        <div class="flex justify-end">
                            <%= submit_tag "Update username", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-hover)] mt-4" %>
                        </div>
                    <% end %>
                </div>
            </details>

            <details class="border border-[var(--border-muted)] bg-[var(--surface2)] p-3">
                <summary class="cursor-pointer font-bold">Request your data</summary>
                <div class="text-sm text-[var(--muted)] mt-1">Download a ZIP file containing all of your pastes and account information, in accordance with data protection regulations.</div>

                <div class="mt-3">
                    <%= form_with url: data_export_settings_path, method: :post, data: { turbo: false } do %>
                        <%= submit_tag "Download my data", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-hover)]" %>
                    <% end %>
                </div>
            </details>

            <details class="border border-[var(--border-danger)] bg-[var(--bg-danger)] p-3">
                <summary class="cursor-pointer font-bold text-[var(--text-danger)]">Delete your account</summary>
                <div class="mt-3 text-sm text-[var(--text-danger)]">This action is irreversible. All of your pastes and account information will be permanently deleted.</div>
                <%= form_with url: account_settings_path, method: :delete, data: { turbo: false }, class: "mt-3 space-y-3" do %>
                    <div>
                        <%= label_tag :password, "Confirm your password to delete your account.", class: "block text-sm font-semibold text-[var(--text-danger)]" %>
                        <%= password_field_tag :password, nil, autocomplete: "current-password", class: "mt-1 w-full border border-[var(--border-danger)] px-3 py-2" %>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-xs text-[var(--text-danger)]">You will be logged out immediately.</div>
                        <%= submit_tag "Delete my account", class: "border border-[var(--border-danger)] bg-[var(--button-bg-danger)] px-4 py-2 font-bold shadow-sm hover:bg-[var(--button-bg-danger-hover)] text-[var(--text-danger)]" %>
                    </div>
                <% end %>
            </details>
        </div>
    </div>
</div>
        