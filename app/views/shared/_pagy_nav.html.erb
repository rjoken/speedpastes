<%# locals: pagy: %>
<% return if pagy.pages <= 1 %>

<nav class="flex items-center justify-center gap-1 text-sm" aria-label="Pages">
    <%# Prev %>
    <% if pagy.previous %>
        <%= link_to pagy.page_url(pagy.previous), class: pagy_nav_class(variant: :active), aria: { label: "Previous page" } do %>
            <%= heroicon "chevron-left", options: { class: "h-5 w-5" } %>
        <% end %>
    <% else %>
        <span class="<%= pagy_nav_class(variant: :inactive) %>" aria-disabled="true">
            <%= heroicon "chevron-left", options: { class: "h-5 w-5" } %>
        </span>
    <% end %>

    <%# Page numbers %>
    <% window = 2 %>
    <% left = [1, pagy.page - window].max %>
    <% right = [pagy.pages, pagy.page + window].min %>

    <% if left > 1 %>
        <%= link_to "1", pagy.page_url(1), class: pagy_nav_class(variant: :active) %>
        <% if left > 2 %>
            <span class="px-2 py-1 text-[var(--muted)]">…</span>
        <% end %>
    <% end %>

    <% (left..right).each do |p| %>
        <% if p == pagy.page %>
            <span class="<%= pagy_nav_class(variant: :inactive) %>" aria-current="page"><%= p %></span>
        <% else %>
            <%= link_to p, pagy.page_url(p), class: pagy_nav_class(variant: :active) %>
        <% end %>
    <% end %>

    <% if right < pagy.pages %>
        <% if right < pagy.pages - 1 %>
            <span class="px-2 py-1 text-[var(--muted)]">…</span>
        <% end %>
        <%= link_to pagy.pages, pagy.page_url(pagy.pages), class: pagy_nav_class(variant: :active) %>
    <% end %>

    <%# Next %>
    <% if pagy.next %>
        <%= link_to pagy.page_url(pagy.next), class: pagy_nav_class(variant: :active), aria: { label: "Next page" } do %>
            <%= heroicon "chevron-right", options: { class: "h-5 w-5" } %>
        <% end %>
    <% else %>
        <span class="<%= pagy_nav_class(variant: :inactive) %>" aria-disabled="true">
            <%= heroicon "chevron-right", options: { class: "h-5 w-5" } %>
        </span>
    <% end %>
</nav>
    