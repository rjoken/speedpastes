<nav class="<%= gradient_class(variant: :nav) %> shadow-sm">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <%= link_to root_path, class: "font-black text-xl tracking-tight text-[var(--text)] flex items-center gap-2" do %>
                <%= image_tag "logo.svg",
                alt: "Speedpastes Logo",
                class: "h-8 w-8",
                style: "filter:
                    drop-shadow(1px 0 0 rgba(255,255,255,.95))
                    drop-shadow(-1px 0 0 rgba(255,255,255,.95))
                    drop-shadow(0 1px 0 rgba(255,255,255,.95))
                    drop-shadow(0 -1px 0 rgba(255,255,255,.95));" %>

                <span>speedpastes</span>
                <span class="text-xs text-[var(--muted)] font-normal">alpha!</span>
            <% end %>
            <div class=" hidden md:flex gap-3">
                <%= link_to "New", new_paste_path, class: link_class(variant: :bold, size: :sm) %>
                <%= link_to "Browse", pastes_path, class: link_class(variant: :bold, size: :sm) %>
                <%= link_to "People", profiles_path, class: link_class(variant: :bold, size: :sm) %>
            </div>
        </div>

        <div class="md:hidden" data-controller="dropdown">
            <button id="navbar-hamburger" class="ml-2" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="navbar-menu" data-action="click->dropdown#toggle">
                <%= heroicon "bars-3", options: { class: "w-6 h-6 text-[var(--text)]" } %>
            </button>
            <div data-dropdown-target="menu" class="absolute right-0 mt-2 w-48 border border-[var(--border)] bg-[var(--surface)] shadow-lg hidden md:hidden" data-action="click@window->dropdown#close">
                <%= link_to "New", new_paste_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                <%= link_to "Browse", pastes_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                <%= link_to "People", profiles_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>   
            </div>
        </div>

        <div class="flex items-center gap-3">
        <% if signed_in? %>
            <div class="relative" data-controller="dropdown">
                <button 
                    type="button" 
                    class="flex items-center gap-2 px-2 py-1 hover:bg-[var(--surface)]"
                    data-action="click->dropdown#toggle"
                    aria-haspopup="menu"
                    aria-expanded="false"
                >
                    <%= render "shared/avatar", user: current_user, size: 28 %>
                    <span class="text-sm font-semibold hidden md:inline">welcome, <%= current_user.username %></span>
                    <span class="text-[var(--muted)]">â–¾</span>
                </button>
                <div
                    class="absolute right-0 mt-2 w-48 border border-[var(--border)] bg-[var(--surface)] shadow-lg hidden"
                    data-dropdown-target="menu"
                    data-action="click@window->dropdown#close">
                    <%= link_to "My Profile", profile_path(current_user.id), class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                    <%= link_to "My Scratchpad", scratchpad_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                    <%= link_to "Settings", settings_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>

                    <div class="border-t border-[var(--border-muted)]"></div>

                    <%= button_to "Log out", logout_path, method: :delete, class: "w-full text-left px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                </div>
            </div>
        <% else %>
            <span class="text-sm font-semibold">
            <%= link_to "Log in", login_path, class: link_class(variant: :bold, size: :sm) %>
            |
            <%= link_to "Sign up", signup_path, class: link_class(variant: :bold, size: :sm) %>
            </span>
        <% end %>
        </div>

        
    </div>
</nav>
