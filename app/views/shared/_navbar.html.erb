<nav class="border-b border-[var(--border)] bg-gradient-to-b from-[var(--surface)] to-[var(--surface2)] shadow-sm">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <%= link_to root_path, class: "font-black text-xl tracking-tight text-[var(--text)] flex items-center gap-2" do %>
                <%= image_tag "logo.svg",
                alt: "Speedpastes Logo",
                class: "h-8 w-8",
                style: "filter:
                    drop-shadow(1px 0 0 rgba(255,255,255,.95))
                    drop-shadow(-1px 0 0 rgba(255,255,255,.95))
                    drop-shadow(0 1px 0 rgba(255,255,255,.95))
                    drop-shadow(0 -1px 0 rgba(255,255,255,.95));" %>

                <span>speedpastes</span>
                <span class="text-xs text-[var(--muted)] font-normal">alpha!</span>
            <% end %>
        </div>


        <div class="flex items-center gap-3">
        <% if signed_in? %>
            <div class="relative" data-controller="dropdown">
                <button 
                    type="button" 
                    class="flex items-center gap-2 px-2 py-1 hover:bg-[var(--surface2)]"
                    data-action="click->dropdown#toggle"
                    aria-haspopup="menu"
                    aria-expanded="false"
                >
                    <%= render "shared/avatar", user: current_user, size: 28 %>
                    <span class="text-sm font-semibold">welcome, <%= current_user.username %></span>
                    <span class="text-[var(--muted)]">â–¾</span>
                </button>
                <div
                    class="absolute right-0 mt-2 w-48 border border-[var(--border)] bg-[var(--surface)] shadow-lg hidden"
                    data-dropdown-target="menu"
                    data-action="click@window->dropdown#close">
                    <%= link_to "My Profile", profile_path(current_user.id), class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                    <%= link_to "Settings", settings_path, class: "block px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>

                    <div class="border-t border-[var(--border-muted)]"></div>

                    <%= button_to "Log out", logout_path, method: :delete, class: "w-full text-left px-4 py-2 text-sm hover:bg-[var(--surface2)]" %>
                </div>
            </div>
        <% else %>
            <span class="text-sm font-semibold">
            <%= link_to "Log in", login_path, class: "hover:underline" %>
            |
            <%= link_to "Sign up", signup_path, class: "hover:underline" %>
            </span>
        <% end %>
        </div>
    </div>
</nav>
