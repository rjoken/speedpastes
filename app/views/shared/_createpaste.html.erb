<div class="p-4">
    <%= form_with model: @paste, class: "space-y-3" do |f| %>
        <% if @paste.errors.any? %>
            <div class="border border-red-300 bg-red-50 p-3 text-sm">
                <div class="font-bold mb-1">Error</div>
                <ul class="list-disc pl-5">
                    <% @paste.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                </ul>
            </div>
        <% end %>

        <div>
            <%= f.label :title, "Title", class: "block text-sm font-semibold" %>
            <%= f.text_field :title, class: "mt-1 w-full border border-[var(--border)] px-3 py-2" %>
        </div>

        <div>
            <%= f.label :body, "Paste", class: "block text-sm font-semibold" %>
            <%= render "shared/paste_editor", f: f, field: :body, rows: 14 %>
            <div class="text-xs text-[var(--muted)] mt-1">Plaintext only for now. Markdown support coming soon!</div>
        </div>

        <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-2">
                <%= f.label :visibility, "Visibility", class: "text-sm font-semibold" %>
                <%= f.select :visibility, Paste.visibilities.keys.map { |k| [k, k] },
                {}, class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-2 py-1 text-sm font-bold shadow-sm hover:bg-[var(--button-bg-hover)]" %>
            </div>

            <%= f.submit(@paste.persisted? ? "Save changes" : "Create paste", class: "border border-[var(--button-outline)] bg-[var(--button-bg)] px-2 py-1 text-sm font-bold shadow-sm hover:bg-[var(--button-bg-hover)]") %>
        </div>
    <% end %>
</div>