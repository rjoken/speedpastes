<%= render "shared/heading", title: "Our Members" do %>
    <div class="px-4 py-2 border-b border-[var(--border-muted)]">
        <%= link_to "Newest", profiles_path(sort: "new"), class: link_class(variant: :bold, size: :sm) %>
        <span>|</span>
        <%= link_to "Oldest", profiles_path(sort: "old"), class: link_class(variant: :bold, size: :sm) %>
        <span>|</span>
        <%= link_to "Most Pastes", profiles_path(sort: "pastes"), class: link_class(variant: :bold, size: :sm) %>
        <span>|</span>
        <%= link_to "Most Views", profiles_path(sort: "views"), class: link_class(variant: :bold, size: :sm) %>
    </div>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 px-4 py-4">
        <% @users.each do |user| %>
            <div class="border border-[var(--border)] bg-[var(--surface)] shadow-sm p-4 flex flex-col items-center text-center">
                <%= render "shared/avatar", user: user, size: 64 %>
                <div class="mt-2 font-semibold text-[var(--text)]">
                    <%= link_to user.username, profile_path(user.id), class: link_class(variant: :bold, size: :sm) %>
                </div>
                <div class="text-xs text-[var(--muted)] mt-1">
                    Member since <%= user.created_at.strftime("%b %-d, %Y") %>
                </div>
                <div class="text-xs text-[var(--muted)] mt-1">
                    <%= pluralize(user.open_paste_count, "paste") %> | <%= pluralize(user.open_views_count, "view") %>
                </div>
            </div>
        <% end %>
    </div>
    <div class="border-t border-[var(--border-muted)] px-4 py-3 flex justify-center mt-6">
        <%= render "shared/pagy_nav", pagy: @pagy  %>
    </div>
<% end %>